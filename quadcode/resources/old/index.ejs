<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui, viewport-fit=cover"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="apple-touch-icon" sizes="180x180" href="<%= require('./src/public/favicon/apple-touch-icon.png') %>" />
    <link rel="icon" type="image/png" sizes="32x32" href="<%= require('./src/public/favicon/favicon-32x32.png') %>" />
    <link rel="icon" type="image/png" sizes="16x16" href="<%= require('./src/public/favicon/favicon-16x16.png') %>" />
    <link rel="manifest" href="<%= require('./src/public/favicon/site.webmanifest') %>" />
    <link rel="mask-icon" href="<%= require('./src/public/favicon/safari-pinned-tab.svg') %>" color="#5bbad5" />
    <meta name="apple-mobile-web-app-title" content="quadcode">
    <meta name="application-name" content="quadcode">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <script src="//rum-static.pingdom.net/pa-5d68ceb705a24100080002f4.js" async></script>
    <link rel="preload" href="<%= require('./src/public/fonts/ProximaNova/ProximaNova-Regular.woff2') %>" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="<%= require('./src/public/fonts/ProximaNova/ProximaNova-Medium.woff2') %>" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="<%= require('./src/public/fonts/ProximaNova/ProximaNova-Bold.woff2') %>" as="font" type="font/woff2" crossorigin="anonymous">
    <style type="text/css">
      #old-browsers {
        display: none;
      }
      #preloader {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 64px;
        height: 64px;
        transform: translate(-50%, -50%);
        z-index: 20;
        transition: opacity 0.5s ease;
        background-image: url(<%= require('!!base64-inline-loader!./src/public/images/common/preloader.svg') %>);
      }
    </style>
  </head>
  <body>
    <div id="preloader"></div>
    <div id="root"></div>
    <div id="old-browsers">
      <%= require('html-loader!./browser.not.support.html') %>
    </div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        var isIE = msie > 0 || !!navigator.userAgent.match(/Trident.*rv:11\./);
        var oldBrowsers = document.querySelector('#old-browsers');

        function addScript(src) {
          const s = document.createElement('script');
          s.type = 'text/javascript';
          s.src = src;
          document.querySelector('body').append(s);
        }

        if (isIE) {
          oldBrowsers.style.display = 'block';
          document.querySelector('#preloader').style.opacity = 0;
        } else {
          oldBrowsers.parentNode.removeChild(oldBrowsers);

          <% for (let js in htmlWebpackPlugin.files.js) { %>
            addScript('<%= htmlWebpackPlugin.files.js[js] %>');
          <% } %>
        }
      });
    </script>
  </body>
</html>
